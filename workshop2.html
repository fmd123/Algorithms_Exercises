<!DOCTYPE html>
<html>
<head>
	<title>RoomsAdventure</title>
	<script   src="https://code.jquery.com/jquery-2.2.4.js"   integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="   crossorigin="anonymous"></script>
</head>
<body>

	<div>
		<h4>Dragon game directions...... need options for quit. </h4>

		<button id ="begin">Begin Game</button><br>

		<!-- <input type="text" name= "input"> -->
		<h3 id="dialogue">Let's begin!</h3>
	</div>

<script type>
var answer;
var room;
var shield = false;
var restart = false;		

	function start(){
		room = "startroom";
		answer = null;
		console.log ("startroom");
		answer = prompt("You are in a room with a door to the north and a door to the west. Which way do you want to go?");

			while (room === "startroom" && (answer === "go east" || answer === "go south")){
				answer = prompt("you can't go that way. Which way do you want to go?");

			}
		
			if (answer === "go north"){
				console.log (" going north");
				dragon();
				
			} else if (answer === "go west"){
				console.log ("going west");
				west();
				
			
			} else if (answer === "quit") {
				document.getElementById('dialogue').innerHTML = "Bye!";
				return;
			}
			
	}

	function dragon(){
		room = "dragonroom";
		answer = null;
		console.log ("dragon room");
		answer = prompt("There is a dragon here. What do you want to do?");

		while (room === "dragonroom" && (answer === "go east" || answer === "go west")){
			answer = prompt("you can't go that way. Which way do you want to go?");
		 }

		if (answer === "go north" && shield === true){
				console.log (" going north");
				document.getElementById("dialogue").innerHTML = "You have safely passed the dragon and survived the game.";
				return;
		} else if (answer === "go north" && shield === false) {
				document.getElementById("dialogue").innerHTML = "The dragon has turned you into crispy fries. Play again?";
				return;
		} else if (answer === "go south"){
				console.log ("going south");
				passingThru();
				
		
		} else if (answer === "quit") {
				document.getElementById('dialogue').innerHTML = "Too late, you were eaten.";
				return;
		} else {
				answer = prompt("please choose from the possible answers given in the directions. What would you like to do?");
		}

		
	}
	
	
	function west() {
		room = "westroom";
		answer = null;
		console.log ("westroom");
		answer = prompt("You are in a room with a shield. What do you want to do?");
		while (room === "westroom" && (answer === "go west" || answer === "go south" || answer === "go north")) {
				answer = prompt("you can't go that way. Which way do you want to go?");
		}

		if (answer === "get shield") {
			console.log ("shield picked up");
			shield = true;
			answer = prompt("you now have a shield. Which way do you want to go?");
				while (room === "westroom" && (answer === "go west" || answer === "go south" || answer === "go north")) {
				answer = prompt("you can't go that way in west room. Which way do you want to go?");
				}

				if (answer === "go east"){
				console.log ("going east");
				passingThru();

				} else if (answer === "quit") {
						document.getElementById('dialogue').innerHTML = "oh well, the dagon would have probably eaten you!";
						return;
				}
		}else if (answer === "go east"){
			console.log ("going east");
			passingThru();

		
		} else if (answer === "quit") {
				document.getElementById('dialogue').innerHTML = "Oh well, the dragon would have probably eaten you!";
				return;
		}
		
	}
 
	function passingThru (){
		room = "passing";
		answer = null;
		console.log ("passing thru startroom");
		while (room === "passing" && (answer === "go east" || answer === "go south")){
				answer = prompt("you can't pass that way. Which way do you want to go?");
			}
		answer = prompt("You are in a room with a door to the north and a door to the west. Which way do you want to go?");
		
			if (answer === "go north"){
				console.log (" going north");
				document.getElementById("dialogue").innerHTML = "Dragon Room";
				dragon();
				
			} else if (answer === "go west"){
				console.log ("going west");
				west();
				
			
			} else if (answer === "quit") {
				document.getElementById('dialogue').innerHTML = "Bye!";
				return;
			}
			
	}

$(document).ready(function(){
		    $("#begin").click(function(){
		        start();
		    });
	});

</script>
<!-- passingThru() was created to handle a scoping problem. the while loop conditions were leaking thru' 
I added the room variable to deal with a while-loop problem. (it quit after second iteration of unacceptable answer.)  
I put the while loop on top to deal with problem of app quitting if I finally did enter an acceptable answer.
reset answer to null  at beginning of function to deal with situation of while loop room === passing and answer === go east because answer was "go east" from previous answer. that might eliminate need for passingThru()-->
</body>
</html>